<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KARIM13 | PROFESSIONAL PANEL</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <style>
        :root { --bg: #0b111b; --card: #161c26; --accent: #10b981; --gold: #f59e0b; --border: #2d3748; --white: #ffffff; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Tajawal', sans-serif; }
        body { background: var(--bg); color: var(--white); text-align: center; overflow-x: hidden; }
        
        /* Header */
        .header { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: var(--bg); position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border); }
        .nav-icons { display: flex; gap: 15px; font-size: 20px; }
        .nav-icons i { cursor: pointer; transition: 0.3s; }
        
        /* Stats (Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø«Ø§Ù†ÙŠ) */
        .stats { display: flex; justify-content: space-around; padding: 20px; margin: 15px; background: rgba(255,255,255,0.03); border-radius: 20px; border: 1px solid var(--border); }
        .stats h2 { color: var(--gold); font-size: 24px; font-weight: 900; }
        .stats p { font-size: 10px; color: #aaa; margin-top: 5px; }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Tabs) */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 15px; }
        .box { background: var(--card); padding: 15px 5px; border-radius: 15px; border: 1px solid var(--border); cursor: pointer; }
        .box.active { border: 2px solid var(--gold); background: rgba(245,158,11,0.1); }
        .box i { font-size: 20px; display: block; margin-bottom: 8px; }
        .box span { font-size: 9px; font-weight: bold; }

        /* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨ */
        .card { background: var(--card); margin: 0 15px 15px; padding: 20px; border-radius: 20px; border: 1px solid var(--border); }
        select, input { width: 100%; padding: 15px; margin-bottom: 12px; border-radius: 12px; border: 1px solid var(--border); background: var(--bg); color: white; text-align: center; outline: none; }
        .price-tag { font-size: 35px; font-weight: 900; color: var(--accent); margin: 15px 0; border: 2px dashed var(--accent); border-radius: 15px; padding: 10px; }
        .btn { width: 100%; padding: 16px; border: none; border-radius: 12px; color: white; font-weight: 900; cursor: pointer; text-decoration: none; display: block; margin-bottom: 10px; }
        
        /* Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ± */
        .logs-panel { display: none; padding: 15px; max-height: 500px; overflow-y: auto; text-align: right; }
        .log-card { background: var(--card); padding: 15px; border-radius: 15px; margin-bottom: 12px; position: relative; border: 1px solid var(--border); }
        .badge { position: absolute; top: 12px; left: 12px; font-size: 10px; padding: 4px 10px; border-radius: 6px; font-weight: bold; }
        .log-actions { display: flex; gap: 8px; margin-top: 12px; justify-content: flex-end; }
        .btn-mini { padding: 8px 12px; border-radius: 8px; font-size: 11px; border: none; cursor: pointer; color: white; display: flex; align-items: center; gap: 5px; text-decoration: none; }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯ÙØ¹ */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }
        .modal-content { background: var(--card); padding: 25px; border-radius: 25px; width: 90%; max-width: 400px; border: 1px solid var(--border); }
        .pay-item { background: #1a222d; padding: 12px; border-radius: 12px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid var(--border); }
    </style>
</head>
<body>

<div class="header">
    <div style="font-weight:900; font-size:20px;">KARIM<span style="color:var(--gold)">13</span> ğŸ¬</div>
    <div class="nav-icons">
        <i class="fas fa-history" onclick="toggleLogs()"></i>
        <i class="fas fa-wallet" onclick="openPay()" style="color:var(--gold)"></i>
        <i class="fas fa-user-shield" onclick="adminAuth()"></i>
    </div>
</div>

<div class="stats">
    <div><h2>+90</h2><p>SERVICES</p></div>
    <div><h2>+2.9K</h2><p>CLIENTS</p></div>
    <div><h2>15851</h2><p>COMMANDES</p></div>
</div>

<div id="grid" class="grid"></div>

<div class="card">
    <select id="srvList" onchange="upd()"></select>
    <input type="text" id="link" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø· / ID / Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
    <input type="number" id="qty" value="1000" oninput="upd()">
    <div class="price-tag" id="price">$0.00</div>
    <button class="btn" style="background:var(--accent)" onclick="confirmOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ğŸ¬</button>
    <a href="#" id="waMain" class="btn" style="background:#25d366" target="_blank"><i class="fab fa-whatsapp"></i> Ø¯Ø¹Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</a>
</div>

<div id="logs" class="logs-panel"></div>

<div id="payM" class="modal">
    <div class="modal-content">
        <h3 style="color:var(--gold); margin-bottom:20px;">ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
        <div class="pay-item"><span>BaridiMob: <b id="c1">00799999001465107315</b></span><i class="fas fa-copy" onclick="copyText('c1')"></i></div>
        <div class="pay-item"><span>Binance: <b id="c2">1194939141</b></span><i class="fas fa-copy" onclick="copyText('c2')"></i></div>
        <div class="pay-item"><span>Flexy: <b id="c3">0656251947</b></span><i class="fas fa-copy" onclick="copyText('c3')"></i></div>
        <div class="pay-item"><span>CCP: <b id="c4">20456182 45</b></span><i class="fas fa-copy" onclick="copyText('c4')"></i></div>
        <button onclick="closePay()" style="width:100%; padding:12px; background:#444; color:white; border:none; border-radius:10px; margin-top:15px; cursor:pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
    const firebaseConfig = { apiKey: "AIzaSyBAGmBZN-aa6ywe3dPYFVABPMJQPzgZxP0", authDomain: "karim-smm.firebaseapp.com", projectId: "karim-smm" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    if(!localStorage.getItem('token')) localStorage.setItem('token', 'USER_' + Math.floor(Math.random()*100000));
    const myID = localStorage.getItem('token');

    let curCat = 'TikTok', isAdm = false;

    // Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ø£Ø®ÙˆØ°Ø© Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ØªÙ‡
    const CATS = [
        { id: 'Facebook', n: 'ÙÙŠØ³Ø¨ÙˆÙƒ', i: 'fab fa-facebook', c: '#1877f2' },
        { id: 'TikTok', n: 'ØªÙŠÙƒ ØªÙˆÙƒ', i: 'fab fa-tiktok', c: '#ff0050' },
        { id: 'Instagram', n: 'Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…', i: 'fab fa-instagram', c: '#e4405f' },
        { id: 'YouTube', n: 'ÙŠÙˆØªÙŠÙˆØ¨', i: 'fab fa-youtube', c: '#ff0000' },
        { id: 'Telegram', n: 'ØªÙ„ÙŠØ¬Ø±Ø§Ù…', i: 'fab fa-telegram', c: '#0088cc' },
        { id: 'Snapchat', n: 'Ø³Ù†Ø§Ø¨ Ø´Ø§Øª', i: 'fab fa-snapchat', c: '#fffc00' },
        { id: 'Premium', n: 'Ø§Ø´ØªØ±Ø§ÙƒØ§Øª', i: 'fas fa-gem', c: '#a855f7' },
        { id: 'Gaming', n: 'Ø£Ù„Ø¹Ø§Ø¨', i: 'fas fa-gamepad', c: '#10b981' }
    ];

    // Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù…Ø£Ø®ÙˆØ°Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø£ÙˆÙ„
    const SRV = [
        { cat: 'TikTok', n: 'ğŸª™ TikTok Coins - 1000 PiÃ¨ces', p: 13.0, fix: true },
        { cat: 'TikTok', n: 'ğŸ‘¤ Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ | Ø­Ù‚ÙŠÙ‚ÙŠ (2000 ÙŠÙˆÙ…ÙŠØ§Ù‹)', p: 1.10 },
        { cat: 'TikTok', n: 'ğŸ‘¤ Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ | Ø¶Ù…Ø§Ù† Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©', p: 0.95 },
        { cat: 'TikTok', n: 'â¤ï¸ Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª ØªÙŠÙƒ ØªÙˆÙƒ | Ø«Ø§Ø¨Øª ÙÙˆØ±ÙŠ', p: 0.0368 },
        { cat: 'Facebook', n: 'ğŸ‘¤ Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ÙÙŠØ³Ø¨ÙˆÙƒ | Ø³Ø±Ø¹Ø© 50K | Ø¶Ù…Ø§Ù†', p: 0.475 },
        { cat: 'Facebook', n: 'ğŸ‘¤ Ù…ØªØ§Ø¨Ø¹ÙŠÙ† Ø¨Ø±ÙˆÙØ§ÙŠÙ„ ÙÙŠØ³Ø¨ÙˆÙƒ', p: 0.54 },
        { cat: 'Facebook', n: 'â±ï¸ ÙÙŠØ³Ø¨ÙˆÙƒ 60 Ø£Ù„Ù Ø¯Ù‚ÙŠÙ‚Ø©', p: 0.95, fix: true },
        { cat: 'Instagram', n: 'ğŸ‘¤ Ù…ØªØ§Ø¨Ø¹ÙŠÙ† Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù… | Ø­Ø³Ø§Ø¨Ø§Øª Ù‚Ø¯ÙŠÙ…Ø©', p: 0.96 },
        { cat: 'YouTube', n: 'ğŸ‘¤ Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙŠÙˆØªÙŠÙˆØ¨ | Ø­Ù‚ÙŠÙ‚ÙŠ', p: 18.62 },
        { cat: 'Premium', n: 'ğŸ¬ Ù†ØªÙÙ„ÙŠÙƒØ³ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… | Ø´Ù‡Ø±', p: 4.50, fix: true },
        { cat: 'Premium', n: 'ğŸ§ Ø³Ø¨ÙˆØªÙŠÙØ§ÙŠ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… | Ø´Ù‡Ø±', p: 2.50, fix: true },
        { cat: 'Gaming', n: 'ğŸ® Ø¨Ø¨Ø¬ÙŠ Ù…ÙˆØ¨Ø§ÙŠÙ„ | 60 Ø´Ø¯Ø©', p: 1.50, fix: true },
        { cat: 'Gaming', n: 'ğŸ® Ø¨Ø¨Ø¬ÙŠ Ù…ÙˆØ¨Ø§ÙŠÙ„ | 325 Ø´Ø¯Ø©', p: 5.50, fix: true }
        // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø¨Ù‚ÙŠØ© Ø§Ù„Ù€ 90 Ø®Ø¯Ù…Ø© Ù‡Ù†Ø§ Ø¨Ù†ÙØ³ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚
    ];

    function render() {
        const g = document.getElementById('grid'); g.innerHTML = '';
        CATS.forEach(c => {
            g.innerHTML += `<div class="box ${c.id===curCat?'active':''}" onclick="setCat('${c.id}')"><i class="${c.i}" style="color:${c.c}"></i><span>${c.n}</span></div>`;
        });
        const sl = document.getElementById('srvList'); sl.innerHTML = '';
        SRV.filter(s => s.cat === curCat).forEach(s => {
            sl.innerHTML += `<option value="${s.n}">${s.n}</option>`;
        });
        upd();
    }

    function setCat(id) { curCat = id; render(); }
    
    function upd() {
        const s = SRV.find(x => x.n === document.getElementById('srvList').value);
        const q = document.getElementById('qty').value || 0;
        if(s) {
            let t = s.fix ? s.p : (s.p / 1000 * q);
            document.getElementById('price').innerText = "$" + t.toFixed(3);
            document.getElementById('waMain').href = `https://wa.me/213656251947?text=Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† ÙƒØ±ÙŠÙ…13:%0AØ§Ù„Ø®Ø¯Ù…Ø©: ${s.n}%0AØ§Ù„Ø±Ø§Ø¨Ø·: ${document.getElementById('link').value}%0AØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: $${t.toFixed(3)}`;
        }
    }

    async function confirmOrder() {
        const lnk = document.getElementById('link').value; if(!lnk) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø§Ø¨Ø·");
        await db.collection("orders").add({ 
            uid: myID, 
            srv: document.getElementById('srvList').value, 
            link: lnk, 
            price: document.getElementById('price').innerText, 
            status: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±', 
            date: new Date().toLocaleString('ar-DZ') 
        });
        openPay();
    }

    function toggleLogs() {
        const p = document.getElementById('logs'); p.style.display = p.style.display === 'block' ? 'none' : 'block';
        let q = db.collection("orders").orderBy("date", "desc");
        if (!isAdm) q = q.where("uid", "==", myID);

        q.onSnapshot(snap => {
            p.innerHTML = '<h3 style="color:var(--gold); margin-bottom:15px; text-align:center;">Ø³Ø¬Ù„ Ø·Ù„Ø¨Ø§ØªÙŠ ğŸ¬</h3>';
            snap.forEach(doc => {
                const d = doc.data();
                const waMsg = encodeURIComponent(`Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø·Ù„Ø¨:\nØ§Ù„Ø®Ø¯Ù…Ø©: ${d.srv}\nØ§Ù„Ø±Ø§Ø¨Ø·: ${d.link}\nØ§Ù„Ø­Ø§Ù„Ø©: ${d.status}`);
                p.innerHTML += `
                    <div class="log-card">
                        <span class="badge" style="background:${d.status==='Ù…ÙƒØªÙ…Ù„'?'#10b98122':'#f59e0b22'}; color:${d.status==='Ù…ÙƒØªÙ…Ù„'?'#10b981':'#f59e0b'}">${d.status}</span>
                        <b>${d.srv}</b><br><small id="val_${doc.id}">${d.link}</small>
                        <div class="log-actions">
                            <button class="btn-mini" style="background:#4a5568" onclick="copyText('val_${doc.id}')"><i class="fas fa-copy"></i> Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                            <a href="https://wa.me/213656251947?text=${waMsg}" class="btn-mini" style="background:#25d366" target="_blank"><i class="fab fa-whatsapp"></i> Ø§Ø³ØªÙØ³Ø§Ø±</a>
                            ${isAdm ? `<button onclick="setDone('${doc.id}')" style="background:var(--accent); border:none; color:white; padding:5px 10px; border-radius:8px; cursor:pointer">ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°</button>` : ''}
                        </div>
                    </div>`;
            });
        });
    }

    function copyText(id) {
        const t = document.getElementById(id).innerText;
        navigator.clipboard.writeText(t); alert("ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¨Ù†Ø¬Ø§Ø­ âœ…");
    }

    function setDone(id) { db.collection("orders").doc(id).update({ status: 'Ù…ÙƒØªÙ…Ù„' }); }
    function adminAuth() { if(prompt("ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:") === "karim13") { isAdm = true; toggleLogs(); } }
    function openPay() { document.getElementById('payM').style.display = 'flex'; }
    function closePay() { document.getElementById('payM').style.display = 'none'; }
    window.onload = () => render();
</script>
</body>
</html>
